
## 常用类型
```
int --------------- 整形 ------------------- 4     个字节
bigint unsigned --- 大整形 ----------------- 8     个字节
decimal(m,d) ------ 定点数 ----------------- m + 2 个字节
datetime ---------- 日期和时间 ------------- 8     个字节
timestamp --------- 时间戳 ----------------- 4     个字节
char(m) ----------- 固定长度, m 为字符数 ---
varchar(m) -------- 可变长度, m 为字符数 ---
```

## 约束
####  NOT NULL
```
create table person (id int not null);       # 创建
alter  table person modify age int not null; # 添加
alter  table person modify age int;          # 删除
```

####  UNIQUE --- 唯一键
```
* 可以存储 NULL
* 整个表中的数据是唯一的, 但 NULL 可以多个
* 可以有多个 unique
* 一个 unique 可以对多个列创建
* 会自动创建唯一索引
* 默认约束名为第一个列名
create table persons (id int unique);                               # 创建
create table persons (id int,      [constraint 约束名] unique(id)); # 创建
alter  table persons add           [constraint 约束名] unique(id)); # 添加
alter  table persons drop index 约束名;                             # 删除
```

#### PRIMARY KEY --- 主键
```
* 唯一键 + 非空 + 最多只有一个
create table persons (id int primary key);                               # 创建
create table persons (id int,      [constraint 约束名] primary key(id)); # 创建
alter  table persons add           [constraint 约束名] primary key(id)); # 添加
alter  table persons drop primary key;                                   # 删除
```

#### AUTO_INCREMENT --- 自动递增
```
* 一般用在主键
* 最多有一列
* 作用于整形
create table person (id int auto_increment);       # 创建
alter  table person modify age int auto_increment; # 添加
alter  table person modify age int;                # 删除
```

#### FOREIGN KEY --- 外键
```
* 从表的外键必须是主表的主键或唯一键
* 先创建主表, 再创建从表
* 先删除从表或外键, 再删除主表
* 外键可以多个
* 外键会自动创建索引
* 默认的外键约束名不是列名
create table persons (id int, [constraint 约束名] foreign key(从表的某个字段)
                                                  references 主表名(被参考字段)
                                                  on update cascade on delete restrict
                                              # 创建外键, 同步更新, 删除严格
alter  table persons add           ....);     # 添加外键约束
alter  table persons drop foreign key 约束名; # 删除外键约束
alter  table persons drop index       约束名; # 删除索引
```

#### check --- 检查
```
create table persons (id int check(...));                           # 创建
create table persons (id int,      [constraint 约束名] check(...)); # 创建
alter  table persons add           [constraint 约束名] check(...)); # 添加
alter  table persons drop check 约束名;                             # 删除
```

#### DEFAULT --- 默认值
```
create table persons (name varchar(10) default 'lyb'); # 创建
alter  table persons alter name set  default 'lyb';    # 添加
alter  table persons alter name drop default;          # 删除
```

#### INDEX --- 索引
```
* 普通索引 ----- 无任何限制
* 唯一索引 ----- 和 unique 对应
* 主键索引 ----- 和 primary key 对应
* 全文索引 ----- 很少使用
* 空间索引 ----- 很少使用
* 单列索引 -----
* 多列索引 ----- 最左前缀原则
* 聚簇索引 -----
* 非聚簇索引 ---
* 降序索引 ----- 如果查找是降序的话, 可以提高效率 --- ASC DESC
* 隐藏索引 ----- 便于观察删除索引的影响 --- INVISIBLE VISIBLE
* 适合建索引
    * where group by order by 中频繁使用
    * 区分度大的列
    * DISTINCT 列
    * 很少变化的列
* 不适合建索引
    * 表很小
    * 列无序
* 联合索引多余多个单列索引
* 删除无用或冗余的索引
show index from table_name;                                   # 查看索引
create table table_name(id int,        index index_name(id)); # 创建普通索引
create table table_name(id int, unique index index_name(id)); # 创建唯一索引
alter  table table_name add        index index_name(id);      # 添加普通索引
alter  table table_name add unique index index_name(id);      # 添加唯一索引
create        index index_name on table_name(id);             # 添加普通索引
create unique index index_name on table_name(id);             # 添加唯一索引
alter  table table_name drop index index_name;                # 删除索引
drop index index_name on table_name;                          # 删除索引
```

