
## 库
```
show   databases;            # 查看所有的数据库
show   create database test; # 查看数据库的创建信息, 比如编码
create database test;        # 创建数据库
alter  database test ...;    # 修改数据库
drop   database test;        # 删除数据库
use    test;                 # 选择数据库
```

## 表
### 0. 准备库
```
show databases;
create database if not exists test;
```

### 1. 创建和删除表
```
use    test;
drop   table if exists student;
drop   table if exists student_test;
create table student (id int);
create table student_test as select * from student;
show   tables;
show   create table student;
show   create table student_test;
desc   student;
desc   student_test;
```

### 2. 增加列
```
use    test;
drop   table if exists student;
create table student (id int);
desc   student;
alter  table student add before_id varchar(20) first;
alter  table student add  after_id varchar(20) after id;
alter  table student add      name varchar(20);
desc   student;
```

### 3. 删除列
```
use    test;
drop   table if exists student;
create table student (id int, name varchar(20));
desc   student;
alter  table student drop name;
desc   student;
```

### 4. 修改列属性
```
use    test;
drop   table if exists student;
create table student (id int, name varchar(20));
desc   student;
alter  table student modify id bigint;
desc   student;
alter  table student modify name varchar(20) first;
desc   student;
alter  table student modify name varchar(20) after id;
desc   student;
```

### 5. 重命名列名
```
use    test;
drop   table if exists student;
create table student (id int, name varchar(20));
desc   student;
alter  table student rename column name to new_name;
desc   student;
alter  table student change id new_id bigint;
desc   student;
```

### 6. 设置列不可见
```
use    test;
drop   table if exists student;
create table student (id int, name varchar(20));
desc   student;
alter  table student alter name set invisible;
desc   student;
alter  table student alter name set visible;
desc   student;
```

### 7. 重命名表
```
use    test;
drop   table if exists student;
drop   table if exists student_test;
create table student (id int, name varchar(20));
show   tables;
alter  table student rename to student_test;
show   tables;
rename table student_test to student;
show   tables;
```

### 8. 删除表内数据(清空表)
```
use    test;
drop   table if exists student;
set    autocommit = false;      # 取消自动提交
create table student (id int, name varchar(20));
insert into  student values(1, "马钰");
insert into  student values(2, "丘处机");
insert into  student values(3, "王处一");
commit;                  # 提交
select * from student;
delete from   student;
select * from student;
rollback;                # 回滚
select * from  student;
truncate table student;  # 清空表 --- 不能回滚
rollback;                # 回滚
select * from  student;
```

### 9. 插入数据(单个)
```
use    test;
drop   table if exists student;
create table student (id int, name varchar(20));
insert into  student values(1, "马钰");
insert into  student values(2, "丘处机");
insert into  student values(3, "王处一");
select * from student;



insert into table_name(...) select ...;  # 插入数据
insert ignore into ...                   # 插入数据 忽略重复的

replace into ...                         # 插入数据 如果重复, 删旧的, 加新的
update table_name set ... where ...      # 更新




## SELECT
书写: SELECT -> DISTINCT -> FROM -> WHERE -> GROUP BY -> HAVING -> ORDER BY -> LIMIT
执行: FROM -> WHERE -> GROUP BY(此后可以使用聚合) -> HAVING -> SELECT -> DISTINCT -> ORDER BY -> LIMIT

distinct -------------- 放在所有列开头
between ... and ... --- 范围 [ ]
isnull ---------------- 是 null
is null --------------- 是 null
is not null ----------- 不是 null
in -------------------- 属于集合
not in ---------------- 不属于集合
like ------------------ % 任意多个字符, _ 任意一个字符
regexp ---------------- 正则表达式
rlike ----------------- 正则表达式

order by ... asc | desc

inner join ... on ... # 内连接
left  join ... on ... # 左连接
right join ... on ... # 右连接

limit 偏移量, 行数
limit 行数

union --------- # 合并, 去重 ---- 效率低
union all ----- # 合并, 不去重 -- 效率高
```


```

## 视图
```
* 相当于是一张虚拟表
* 不存储数据
* 一般只用于查询
* 简化操作, 便于操作
* 提高数据安全
* 底层变化时, 必须更新视图

create [or replace] view view_name as select ... # 创建或更新视图
alter view view_name as select ...    # 更新视图
drop view                    view_name;               # 删除视图

```

